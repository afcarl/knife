
# WARNING this is a developer makefile, not generated by Autotools.

TEC_FLAG=-t

test: all
	( cd ../cases/one_cell && \
	  time ../../`uname`/src/knife -s surface.fgrid -b 1 -r \
	                               -v one_cell.fgrid $(TEC_FLAG) )
	( cd ../cases/box5 && \
	  time ../../`uname`/src/knife -s surface.fgrid -b 1 \
	                               -v box5.fgrid $(TEC_FLAG) )
	( cd ../cases/tiny3d && \
	  time ../../`uname`/src/knife -s cylinder.fgrid -b 1 -b 2 -r \
	                               -v gbumpn.fgrid $(TEC_FLAG) )
	( cd ../cases/bump && \
	  time ../../`uname`/src/knife -s bump.fgrid -b 1 \
	                               -v bump.fgrid $(TEC_FLAG) )
	( cd ../cases/om6box && \
	  time ../../`uname`/src/knife -s om6.fgrid -b 1 -b 2 \
	                               -v om6box.fgrid $(TEC_FLAG) )
	( cd ../cases/big3d && \
	  time ../../`uname`/src/knife -s cylinder.fgrid -b 1 -b 2 -r \
	                               -v gbumpn.fgrid $(TEC_FLAG) )
val: all
	( cd ../cases/box5 && \
	  valgrind ../../`uname`/src/knife -s surface.fgrid -b 1 \
	                               -v box5.fgrid $(TEC_FLAG) )
	( cd ../cases/tiny3d && \
	  valgrind ../../`uname`/src/knife -s cylinder.fgrid -b 1 -b 2 -r \
	                               -v gbumpn.fgrid $(TEC_FLAG) )

prof_om6: all
	( cd ../cases/om6box && \
	  time ../../`uname`/src/knife-profile -s om6.fgrid -b 1 -b 2 \
	                                       -v om6box.fgrid )
	( cd ../cases/om6box && \
	  gprof ../../`uname`/src/knife-profile > profile )

profile: all
	( cd ../cases/bump && \
	  octave bump.m )
	( cd ../cases/bump && \
	  time ../../`uname`/src/knife-profile -s bump_surface.fgrid -b 1 \
	                                       -v bump.fgrid )
	( cd ../cases/bump && \
	  gprof ../../`uname`/src/knife-profile > profile )

all:
	( cd ../`uname` && $(MAKE) all )

check:
	( cd ../`uname` && $(MAKE) check )

install:
	( cd ../`uname` && $(MAKE) install )
	( cd ../`uname`64 && $(MAKE) install )

clean:
	rm -rf Adj Primal Near Node

bu:
	( cd .. && $(MAKE) bu )

